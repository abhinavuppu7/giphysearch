<!doctype html>
<html>
	<head>
		<title>Giphy Search Engine</title>
		<link rel="stylesheet" href="css/main.css">
		<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
	</head>
	<body>
		
		<div style="display: flex;flex-direction: column;align-items: center; margin-top: 20px;"><img src="https://media.giphy.com/media/xTiTnJ0uuZEwVlYQog/giphy.gif" ></div>
		<div class="container container-padding50">
		
			

			<input  placeholder="search here for GIFS" value="" type="text" class="js-userinput container-textinput" />

			<button class="js-go container-button" style="cursor: pointer;">Go!</button>
		</div>
		<div class="container container-padding50 js-container">

		</div>
		<script >document.querySelector(".js-go").addEventListener("click", function () {
			var box = document.querySelector("input").value;
			console.log(box);
			FindGiphy(box);
		});
		document.querySelector(".js-userinput").addEventListener("keyup", function (e) {
			var box = document.querySelector("input").value;
			console.log(box);
			if (e.which === 13) FindGiphy(box);
		});
		function FindGiphy(data) {
			var url =
				"https://api.giphy.com/v1/gifs/search?q=" + data + "&api_key=dc6zaTOxFJmzC";
		
			// AJAX Request
			var GiphyAJAXCall = new XMLHttpRequest();
			GiphyAJAXCall.open("GET", url);
			GiphyAJAXCall.send();
			GiphyAJAXCall.addEventListener("load", function (e) {
				var data = e.target.response;
				pushToDOM(data);
			});
		}
		
		function pushToDOM(input) {
			var response = JSON.parse(input);
			for (var i = 0; i < response.data.length; i++) {
				var imageURL = response.data[i].images.fixed_height.url;
		
				var container = document.querySelector(".js-container");
				container.innerHTML +=
					'<img src="' + imageURL + '" class="container-image">';
			}
		}
		</script>

	</body>
</html>